# Dicee Project - Runtime versions and tasks
# Managed by mise (https://mise.jdx.dev)

[tools]
node = "24"
# Rust: mise delegates to rustup via RUSTUP_TOOLCHAIN=stable
# Do NOT install Rust via Homebrew - it conflicts with wasm32 target
# See packages/engine/rust-toolchain.toml for explicit target config
rust = "stable"
# Python available if needed for scripting
# python = "3.12"

[tasks]
# Core development tasks
dev = "pnpm dev"
build = "pnpm build"
test = "pnpm test"
check = "pnpm check"

# Linting and formatting (Biome)
lint = "pnpm lint"
format = "pnpm format"

# Web-specific
"web:dev" = "pnpm --filter @dicee/web dev"
"web:build" = "pnpm --filter @dicee/web build"
"web:test" = "pnpm web:vitest"
"web:sync" = "pnpm web:sync"

# Engine (Rust/WASM)
"engine:build" = "pnpm build:engine"
"engine:test" = "cargo test --manifest-path packages/engine/Cargo.toml"
"engine:check" = "pnpm check:rust"

# Quality gate
quality = "./scripts/quality-gate.sh"

[env]
DICEE_ENV = "development"
